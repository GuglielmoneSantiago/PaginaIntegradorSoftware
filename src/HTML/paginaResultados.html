<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Survey Results</title>
    <link rel="stylesheet" href="/static/paginaResultados.css">
</head>
<body>
    <section class="container"> 
        <header class="header">
            <img src="/src/LogoGalletira.png" alt="OatChoc">
            <div class="container-header">
                <h1></h1>
            </div>
        </header>
    <div class="container">
        <h1>Survey Results</h1>
        <button onclick="downloadCSV()">Descargar Resultados en CSV</button>
        
        <script>
            function downloadCSV() {
                window.location.href = "/download_csv";
            }
        </script>
        <div id="results">
            <button id="mostrarTelaranaBtn">Mostrar Telaraña</button>
            <button id="mostrarPreguntaDosBtn">Mostrar Pregunta 2</button>
            <button id="mostrarChocolateBtn">Mostrar Chocolate</button>
            <button id="mostrarAtraccionBtn">Mostrar Atracción</button>
            <button id="mostrarExpectativaBtn">Mostrar Expectativa</button>
            <button id="mostrarSaboresBtn">Mostrar Sabores</button>

            <img class="grafico" id="graficoTelarana" src="tu-imagen-telarana.png" alt="Gráfico de Telaraña">
            <img class="grafico" id="graficoPreguntaDos" src="tu-imagen-pregunta-dos.png" alt="Gráfico de Pregunta 2">
            <img class="grafico" id="graficoChocolate" src="tu-imagen-chocolate.png" alt="Gráfico de Chocolate">
            <img class="grafico" id="graficoAtraccion" src="tu-imagen-atraccion.png" alt="Gráfico de Atracción">
            <img class="grafico" id="graficoExpectativa" src="tu-imagen-expectativa.png" alt="Gráfico de Expectativa">
            <img class="grafico" id="graficoSabores" src="tu-imagen-sabores.png" alt="Gráfico de Sabores">

        </div>
    </div>
    <script>
        function actualizarImagen() {
            fetch('http://localhost:8000/graph/pregunta1') // grafico pregunta 1
                .then(response => response.json())
                .then(data => {
                    const imagenBase64 = data.imagen_base64_barra_pregunta_uno;
                    const imgElement = document.getElementById('graficoTelarana');
                    imgElement.src = `data:image/png;base64,${imagenBase64}`;
                })
                .catch(error => console.error('Error:', error));
            fetch('http://localhost:8000/graph/pregunta2') // grafico pregunta 2
                .then(response => response.json())
                .then(data => {
                    const imagenBase64 = data.imagen_base64_barra_pregunta_dos;
                    const imgElement = document.getElementById('graficoPreguntaDos');
                    imgElement.src = `data:image/png;base64,${imagenBase64}`;
                })
                .catch(error => console.error('Error:', error));
            fetch('http://localhost:8000/graph/chocolate') // grafico pregunta 3
                .then(response => response.json())
                .then(data => {
                    const imagenBase64 = data.imagen_base64_chocolate;
                    const imgElement = document.getElementById('graficoChocolate');
                    imgElement.src = `data:image/png;base64,${imagenBase64}`;
                })
                .catch(error => console.error('Error:', error));
            fetch('http://localhost:8000/graph/atraccion') // grafico pregunta 4
                .then(response => response.json())
                .then(data => {
                    const imagenBase64 = data.imagen_base64_atraccion;
                    const imgElement = document.getElementById('graficoAtraccion');
                    imgElement.src = `data:image/png;base64,${imagenBase64}`;
                })
                .catch(error => console.error('Error:', error));
            fetch('http://localhost:8000/graph/expectativa') // grafico pregunta 5
                .then(response => response.json())
                .then(data => {
                    const imagenBase64 = data.imagen_base64_expectativa;
                    const imgElement = document.getElementById('graficoExpectativa');
                    imgElement.src = `data:image/png;base64,${imagenBase64}`;
                })
                .catch(error => console.error('Error:', error));
            fetch('http://localhost:8000/graph/sabores') // grafico pregunta 7
                .then(response => response.json())
                .then(data => {
                    const imagenBase64 = data.imagen_base64_barra_pregunta_siete;
                    const imgElement = document.getElementById('graficoSabores');
                    imgElement.src = `data:image/png;base64,${imagenBase64}`;
                })
                .catch(error => console.error('Error:', error));
        }
    const telaranaBtn = document.getElementById('mostrarTelaranaBtn');
    const preguntaDosBtn = document.getElementById('mostrarPreguntaDosBtn');
    const chocolateBtn = document.getElementById('mostrarChocolateBtn');
    const atraccionBtn = document.getElementById('mostrarAtraccionBtn');
    const expectativaBtn = document.getElementById('mostrarExpectativaBtn');
    const saboresBtn = document.getElementById('mostrarSaboresBtn');

    const graficos = document.querySelectorAll('.grafico');

    telaranaBtn.addEventListener('click', function() {
        ocultarGraficos();
        document.getElementById('graficoTelarana').style.display = 'block';
    });

    preguntaDosBtn.addEventListener('click', function() {
        ocultarGraficos();
        document.getElementById('graficoPreguntaDos').style.display = 'block';
    });

    chocolateBtn.addEventListener('click', function() {
        ocultarGraficos();
        document.getElementById('graficoChocolate').style.display = 'block';
    });

    atraccionBtn.addEventListener('click', function() {
        ocultarGraficos();
        document.getElementById('graficoAtraccion').style.display = 'block';
    });

    expectativaBtn.addEventListener('click', function() {
        ocultarGraficos();
        document.getElementById('graficoExpectativa').style.display = 'block';
    });

    saboresBtn.addEventListener('click', function() {
        ocultarGraficos();
        document.getElementById('graficoSabores').style.display = 'block';
    });

    function ocultarGraficos() {
        graficos.forEach(grafico => {
            grafico.style.display = 'none';
        });
    }
        // Llama a la función para actualizar la imagen cada 8 segundos
        setInterval(actualizarImagen, 2000); // 8000 milisegundos = 8 segundos
    </script>
</body>
</html>
